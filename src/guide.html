<!-- @pageTitle 가이드 -->
<!-- @pageCreated 2025-07-09 -->
<!-- @pageUpdated 2025-07-09 -->
<!-- @pageNote 가이드 구성 -->
<!DOCTYPE html>
<html lang="ko">
<head>
    {{>meta}}
    <script type="module" src="/js/common/ui.js"></script>
    <script type="module" src="/js/pages/map.js"></script>
    <link rel="stylesheet" href="./lib/ol/ol.css">
    <link rel="stylesheet" href="./lib/swiper/swiper-bundle.min.css">
    <script src="./lib/ol/ol.js"></script>
    <script src="./lib/swiper/swiper-bundle.min.js"></script>
    <style>
        
        #guide{
            margin: 0 auto;
            width: 1000px;
            .inner{
                padding: 2rem 0;
                margin-top: 2rem;
                margin-bottom: 2rem;
                border-bottom: 1px solid #ddd;
            }
        }
        .btn{
            padding: 1rem 2rem;
            background-color: #000;
            color: #fff;
            font-size: 1.6rem;
            font-weight: 700;
        }
    </style>
</head>

<body>
    <!-- header -->
    {{> header}}
    <!-- //header -->

    <main id="guide">
        <div class="inner">
            <h2>모달</h2>
            <button type="button" class="btn" id="poi-call">POI 호출</button>
            <button type="button" class="btn" onClick="openSlidePopup()">슬라이드 팝업 호출</button>
            <button type="button" class="btn" id="area-call">거리재기 팝업 호출</button>
        </div>
    </main>
    <!-- //main -->
    {{> map-info-popup}}
    {{> map-poi-popup}}
    {{> map-slide-popup}}

    <script>
        const poiCall = document.getElementById('poi-call');
        poiCall.addEventListener('click', () => {
            const poiPoup = document.querySelector('.poi-popup');
            poiPoup.style.display = 'block';
        });

        const areaCall = document.getElementById('area-call');
        areaCall.addEventListener('click', () => {
            const areaPoup = document.querySelector('.area-info-popup');
            areaPoup.style.display = 'block';
        });


        let swiper = null;

        const slidePopup = document.querySelector(".slide-popup");
        const closeBtn = document.querySelector(".slide-popup-close");
        const currentEl = document.querySelector(
        ".swiper-pagination-total .current"
        );
        const totalEl = document.querySelector(".swiper-pagination-total .total");

        // 열기 함수
        function openSlidePopup() {
        
        //if (slidePopup.style.display !== "none") return;

        slidePopup.style.display = "block";

        swiper = new Swiper(".swiper", {
            slidesPerView: 1,
            spaceBetween: 10,
            navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
            },
            on: {
            init() {
                totalEl.textContent = this.slides.length;
                currentEl.textContent = this.realIndex + 1;
            },
            slideChange() {
                currentEl.textContent = this.realIndex + 1;
            },
            },
        });
        }

        // 닫기 함수
        function closeSlidePopup() {
        if (swiper) {
            swiper.destroy();
            swiper = null;
        }
        slidePopup.style.display = "none";
        }
        // 닫기 버튼 이벤트
        closeBtn.addEventListener("click", closeSlidePopup);
        
        
    </script>
</body>
</html>